cells:
  root:
    type: root
    name: "root"
    flags: [SYS_VIRTUAL_DEBUG_CONSOLE]

    hypervisor_memory:
      size: 16 MB

    debug_console:
      address: 0xfe215040
      size: 0x40
      type: CON_TYPE_8250
      flags: [CON_ACCESS_MMIO, CON_REGDIST_4]

    cpus: 0-3

    memory_regions:
      "Main Memory":
        size: 128 MB
        flags: [MEM_READ, MEM_WRITE, MEM_EXECUTE]

  linux1:
    type: "linux"
    name: "Linux demo 1"
    flags: [PASSIVE_COMMREG, VIRTUAL_CONSOLE_PERMITTED]
    cpus: 2

    debug_console:
      address: 0xfe215040
      type: CON_TYPE_8250
      size: 0x40
      flags: [CON_ACCESS_MMIO, CON_REGDIST_4]

    memory_regions:
      RAM 1:
        virtual_start_addr: 0
        size: 0x10000
        flags: [MEM_READ, MEM_WRITE, MEM_EXECUTE, MEM_LOADABLE]

      RAM 2:
        size: 0x8000000
        flags: [MEM_READ, MEM_WRITE, MEM_EXECUTE, MEM_DMA, MEM_LOADABLE]

      fe215040.serial:
        physical_start_addr: 0xfe215040
        virtual_start_addr: 0xfe215040
        size: 0x40
        flags:
          - JAILHOUSE_MEM_READ | JAILHOUSE_MEM_WRITE | JAILHOUSE_MEM_IO | JAILHOUSE_MEM_IO_8
            | JAILHOUSE_MEM_IO_16 | JAILHOUSE_MEM_IO_32 | JAILHOUSE_MEM_IO_64 | JAILHOUSE_MEM_ROOTSHARED

      fe200000.gpio:
        physical_start_addr: 0xfe200000
        virtual_start_addr: 0xfe200000
        size: 0xb4
        flags:
          - JAILHOUSE_MEM_READ | JAILHOUSE_MEM_WRITE | JAILHOUSE_MEM_IO | JAILHOUSE_MEM_IO_8
            | JAILHOUSE_MEM_IO_16 | JAILHOUSE_MEM_IO_32 | JAILHOUSE_MEM_IO_64 | JAILHOUSE_MEM_ROOTSHARED

      communication_region:
        flags: [MEM_READ, MEM_WRITE, MEM_COMM_REGION]

  linux2:
    type: "linux"
    name: "Linux demo 2"
    flags: [PASSIVE_COMMREG, VIRTUAL_CONSOLE_PERMITTED]
    cpus: 3

    debug_console:
      address: 0xfe215040
      type: CON_TYPE_8250
      size: 0x40
      flags: [CON_ACCESS_MMIO, CON_REGDIST_4]

    memory_regions:
      RAM 1:
        virtual_start_addr: 0
        size: 0x10000
        flags: [MEM_READ, MEM_WRITE, MEM_EXECUTE, MEM_LOADABLE]

      fe215040.serial:
        physical_start_addr: 0xfe215040
        virtual_start_addr: 0xfe215040
        size: 0x40
        flags:
          - JAILHOUSE_MEM_READ | JAILHOUSE_MEM_WRITE | JAILHOUSE_MEM_IO | JAILHOUSE_MEM_IO_8 | JAILHOUSE_MEM_IO_16 | JAILHOUSE_MEM_IO_32 | JAILHOUSE_MEM_IO_64 | JAILHOUSE_MEM_ROOTSHARED

      fe200000.gpio:
        physical_start_addr: 0xfe200000
        virtual_start_addr: 0xfe200000
        size: 0xb4
        flags:
          - JAILHOUSE_MEM_READ | JAILHOUSE_MEM_WRITE | JAILHOUSE_MEM_IO | JAILHOUSE_MEM_IO_8 | JAILHOUSE_MEM_IO_16 | JAILHOUSE_MEM_IO_32 | JAILHOUSE_MEM_IO_64 | JAILHOUSE_MEM_ROOTSHARED

      RAM 2:
        size: 0x8000000
        flags: [MEM_READ, MEM_WRITE, MEM_EXECUTE, MEM_DMA, MEM_LOADABLE]

      communication_region:
        flags: [MEM_READ, MEM_WRITE, MEM_COMM_REGION]

shmem:
  net1:
    protocol: SHMEM_PROTO_VETH
    peers: [root, linux1]

  net2:
    protocol: SHMEM_PROTO_VETH
    peers: [root, linux2]
