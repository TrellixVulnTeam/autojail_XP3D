cells:
  root:
    type: root #linux, generic
    name: "Raspberry PI4"
    vpci_irq_base: 150 # 182-32
    flags: [SYS_VIRTUAL_DEBUG_CONSOLE]

    hypervisor_memory:
      physical_start_addr: 0x3fc00000 # 0x11319sollte es eig sein
      size: 16 MB

    debug_console:
      address: 0xfe215040
      size: 0x40
      type: CON_TYPE_8250
      flags: [CON_ACCESS_MMIO, CON_REGDIST_4]

    platform_info:
      pci_mmconfig_base: 0xe0000000
      pci_mmconfig_end_bus: 0
      pci_is_virtual: 1
      pci_domain: 1
      arm:
        - gic_version = 2,
        - gicd_base = 0xff841000,
        - gicc_base = 0xff842000,
        - gich_base = 0xff844000,
        - gicv_base = 0xff846000,
        - maintenance_irq = 25,

    cpus: 0-3 

    memory_regions:
      "System RAM":
        physical_start_addr: 0x0
        virtual_start_addr: 0x0
        size: 1 GB
        flags: [MEM_READ, MEM_WRITE, MEM_EXECUTE]

      ivshmem1:
        physical_start_addr: 0x3faf0000
        virtual_start_addr: 0x3faf0000
        size: 0x1000
        flags: [MEM_READ]

      ivshmem2:
        physical_start_addr: 0x3faf1000
        virtual_start_addr: 0x3faf1000
        size: 0x9000
        flags: [MEM_READ, MEM_WRITE]

      ivshmem3:
        physical_start_addr: 0x3fafa000
        virtual_start_addr: 0x3fafa000
        size: 0x2000
        flags: [MEM_READ, MEM_WRITE]

      ivshmem4:
        physical_start_addr: 0x3fafc000
        virtual_start_addr: 0x3fafc000
        size: 0x2000
        flags: [MEM_READ]

      ivshmem5:
        physical_start_addr: 0x3fafe000
        virtual_start_addr: 0x3fafe000
        size: 0x2000
        flags: [MEM_READ]

      shmem_net:
        start_addr: 0x3fb00000
        device_id: 0 #0 = 0x1000; 1 = 0x80000

    irqchips:
      gic:
        address: 0xff841000
        pin_base: 32
        interrupts: 0-223

    pci_devices:
      demo:
        - type = JAILHOUSE_PCI_TYPE_IVSHMEM,
        - domain = 1,
        - bdf = 0 << 3,
        - bar_mask = JAILHOUSE_IVSHMEM_BAR_MASK_INTX,
        - shmem_regions_start = 0,
        - shmem_dev_id = 0,
        - shmem_peers = 3,
        - shmem_protocol = JAILHOUSE_SHMEM_PROTO_UNDEFINED,

      networking:
        - type = JAILHOUSE_PCI_TYPE_IVSHMEM,
        - domain = 1,
        - bdf = 1 << 3,
        - bar_mask = JAILHOUSE_IVSHMEM_BAR_MASK_INTX,
        - shmem_regions_start = 5,
        - shmem_dev_id = 0,
        - shmem_peers = 2,
        - shmem_protocol = JAILHOUSE_SHMEM_PROTO_VETH,
